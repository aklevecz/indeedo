{"version":3,"sources":["actions.js","UserContext.js","utils.js","BubbleContext.js","styles.js","Controls.js","GameOver.js","App.js","index.js"],"names":["BEGIN_GAME","ADD_BUBBLE","POP_BUBBLE","TIMER_TICK","UPDATE_USER","UserContext","React","createContext","initialUserState","name","user_reducer","state","action","type","_objectSpread","UserProvider","_ref","children","_useReducer","useReducer","_useReducer2","Object","slicedToArray","userState","user_dispatch","react_default","a","createElement","Provider","value","getRandomInt","min","max","Math","ceil","floor","random","BubbleContext","bubbleReducer","BubbleContext_objectSpread","begin","id","ids","length","size","x","newBubble","y","popped","bubbles","concat","toConsumableArray","poppedBubbles","includes","score","points","bubblesPopped","map","b","velocity","timer","gameOver","initialState","BubbleProvider","bubblesState","bubbles_dispatch","Nametainer","styled","div","_templateObject","Hey","_templateObject2","UserInput","input","_templateObject3","Timer","_templateObject4","ControlsContainer","_templateObject5","Score","_templateObject6","PlayButton","button","_templateObject7","BeginButton","_templateObject8","SliderContainer","_templateObject9","FooterName","_templateObject10","Controls","setPlay","play","_useContext","useContext","onClick","onChange","e","target","Container","GameOver_templateObject","GameOver","App","_React$createElement","_useContext2","_useState","useState","_useState2","canvasRef","useRef","ctxRef","intervalRef","playRef","velocityRef","drawBubbles","ctx","movedBubbles","current","i","beginPath","ellipse","PI","stroke","App_objectSpread","handleClick","layerX","layerY","pow","useEffect","getContext","fillStyle","fillRect","addEventListener","introAnimate","requestAnimationFrame","lineWidth","strokeStyle","document","hidden","animate","clearRect","setInterval","style","pointerEvents","clearInterval","newBubbles","filter","keys","toString","mergedBubbles","handleUserChange","react","placeholder","src_Controls","touchAction","ref","defineProperty","src_GameOver","ReactDOM","render","src_BubbleContext","src_UserContext","src_App","getElementById"],"mappings":"uLAAaA,EAAa,aACbC,EAAa,aACbC,EAAa,aAGbC,EAAa,aAEbC,EAAc,0OCJpB,IAAMC,EAAcC,IAAMC,gBAE3BC,EAAmB,CAAEC,KAAM,IAE3BC,EAAe,SAACC,EAAOC,GAAW,IAC9BH,EAASG,EAATH,KACR,OAAQG,EAAOC,MACb,KAAKT,EACH,4VAAAU,CAAA,GAAYH,EAAZ,CAAmBF,SACrB,QACE,OAAOE,IAcEI,EAVM,SAAAC,GAAkB,IAAfC,EAAeD,EAAfC,SAAeC,EACFC,qBAAWT,EAAcF,GADvBY,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC9BK,EAD8BH,EAAA,GACnBI,EADmBJ,EAAA,GAGrC,OACEK,EAAAC,EAAAC,cAACtB,EAAYuB,SAAb,CAAsBC,MAAO,CAAEN,YAAWC,kBACvCP,WCtBA,SAASa,EAAaC,EAAKC,GAGhC,OAFAD,EAAME,KAAKC,KAAKH,GAChBC,EAAMC,KAAKE,MAAMH,GACVC,KAAKE,MAAMF,KAAKG,UAAYJ,EAAMD,EAAM,IAAMA,qjBCOhD,IAAMM,EAAgB/B,IAAMC,gBAiB7B+B,EAAgB,SAAC3B,EAAOC,GAC5B,OAAQA,EAAOC,MACb,KAAKb,EACH,OAAOuC,EAAA,GAAK5B,EAAZ,CAAmB6B,OAAO,IAC5B,KAAKvC,EACH,IAAMwC,EAAK9B,EAAM+B,IAAIC,OACjBC,EAAOd,EAAa,GAAI,KACxBe,EAAIf,EAAa,EAAG,KACpBe,EAAID,EAAO,IACbC,EAAI,IAAMD,EACDC,EAAID,GAAQ,IACrBC,EAAI,EAAID,GAEV,IAAME,EAAY,CAChBL,KACAI,IACAE,EAAG,EACHH,OACAI,QAAQ,GAIV,OAAOT,EAAA,GAAK5B,EAAZ,CAAmBsC,QAFN,GAAAC,OAAA7B,OAAA8B,EAAA,EAAA9B,CAAOV,EAAMsC,SAAb,CAAsBH,IAEPJ,IADnB,GAAAQ,OAAA7B,OAAA8B,EAAA,EAAA9B,CAAOV,EAAM+B,KAAb,CAAkBD,MAE7B,KAAKvC,EACH,GAAIS,EAAMyC,cAAcC,SAASzC,EAAO6B,IAAK,OAAO9B,EACpD,IAAM2C,EAAQ3C,EAAM2C,MAAQ1C,EAAO2C,OAC7BH,EAAa,GAAAF,OAAA7B,OAAA8B,EAAA,EAAA9B,CAAOV,EAAMyC,eAAb,CAA4BxC,EAAO6B,KAChDe,EAAgB7C,EAAMsC,QAAQQ,IAAI,SAAAC,GACtC,OAAIA,EAAEjB,KAAO7B,EAAO6B,GACXF,EAAA,GAAKmB,EAAZ,CAAeV,QAAQ,IAEhBU,IAGX,OAAOnB,EAAA,GAAK5B,EAAZ,CAAmBsC,QAASO,EAAeJ,gBAAeE,UAC5D,IH3D2B,kBG6DzB,OAAOf,EAAA,GAAK5B,EAAZ,CAAmBgD,SADE/C,EAAb+C,WAEV,KAAKxD,EACH,IAAMyD,EAAQjD,EAAMiD,MAAQ,EAE5B,OAAOrB,EAAA,GAAK5B,EAAZ,CAAmBiD,QAAOC,SADC,IAAVD,IAEnB,QACE,OAAOjD,IAIPmD,EAAe,CACnBtB,OAhEY,EAiEZE,IA3DU,GA4DVO,QAhEc,GAiEdG,cA/DoB,GAgEpBO,SA5De,GA6DfL,MA3DY,EA4DZM,MA1DY,GA2DZC,UAzDe,GAyEFE,EAbQ,SAAA/C,GAAkB,IAAfC,EAAeD,EAAfC,SAAeC,EACEC,qBACvCmB,EACAwB,GAHqC1C,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAChC8C,EADgC5C,EAAA,GAClB6C,EADkB7C,EAAA,GAMvC,OACEK,EAAAC,EAAAC,cAACU,EAAcT,SAAf,CAAwBC,MAAO,CAAEmC,eAAcC,qBAC5ChD,42FC3FA,IAAMiD,EAAaC,IAAOC,IAAVC,KAUVC,EAAMH,IAAOC,IAAVG,KAIHC,EAAYL,IAAOM,MAAVC,KAQTC,EAAQR,IAAOC,IAAVQ,KAaLC,EAAoBV,IAAOC,IAAVU,KAQjBC,EAAQZ,IAAOC,IAAVY,KAOLC,EAAad,IAAOe,OAAVC,KASVC,EAAcjB,YAAOc,EAAPd,CAAHkB,KAaXC,EAAkBnB,IAAOC,IAAVmB,KAsCfC,EAAarB,IAAOC,IAAVqB,KCzERC,EA7BE,SAAA1E,GAAuB,IAApB2E,EAAoB3E,EAApB2E,QAASC,EAAW5E,EAAX4E,KAAWC,EAIlCC,qBAAWzD,GAFb4B,EAFoC4B,EAEpC5B,iBACgBX,EAHoBuC,EAGpC7B,aAAgBV,MAElB,OACE7B,EAAAC,EAAAC,cAACkD,EAAD,KACEpD,EAAAC,EAAAC,cAACoD,EAAD,KAAQzB,GACR7B,EAAAC,EAAAC,cAACsD,EAAD,CAAYc,QAAS,kBAAMJ,GAASC,KACjCA,EAAO,QAAU,QAEpBnE,EAAAC,EAAAC,cAAC2D,EAAD,KACE7D,EAAAC,EAAAC,cAAA,SACEqE,SAAU,SAAAC,GAAC,OACThC,EAAiB,CACfpD,KLtBiB,kBKuBjB8C,SAAUsC,EAAEC,OAAOrE,SAGvBhB,KAAK,QACLJ,KAAK,SACLsB,IAAI,KACJC,IAAI,uPC9Bd,IAAMmE,EAAYhC,IAAOC,IAAVgC,KAkBAC,EARE,SAAArF,GAAqB,IAAlBP,EAAkBO,EAAlBP,KAAM6C,EAAYtC,EAAZsC,MACxB,OACE7B,EAAAC,EAAAC,cAACwE,EAAD,iBACY1F,EADZ,IACkBgB,EAAAC,EAAAC,cAAA,oBAAY2B,EAAZ,mOC2LPgD,OA9Kf,WAAe,IAAAC,EAAAV,EACwBC,qBAAWzF,GAAxCkB,EADKsE,EACLtE,UAAWC,EADNqE,EACMrE,cADNgF,EAE8BV,qBAAWzD,GAA9C2B,EAFKwC,EAELxC,aAAcC,EAFTuC,EAESvC,iBAFTwC,EAGWC,oBAAS,GAHpBC,EAAAtF,OAAAC,EAAA,EAAAD,CAAAoF,EAAA,GAGNb,EAHMe,EAAA,GAGAhB,EAHAgB,EAAA,GAIPC,EAAYC,mBACZC,EAASD,mBACTE,EAAcF,mBACdG,EAAUH,mBACVI,EAAcJ,mBAEd5D,EAAU4D,iBAAO7C,EAAaf,SAE9BiE,EAAc,SAAAC,GAClB,IAAMC,EAAenE,EAAQoE,QAAQ5D,IAAI,SAACC,EAAG4D,GAC3C,IAAM3D,EAAWD,EAAEX,EAAI,IAAMW,EAAEX,EAAI,EAAIkE,EAAYI,QAAU,GACvDzE,EAAOc,EAAEV,OAAS,EAAIU,EAAEd,KAS9B,OAPI0E,IAAMrE,EAAQoE,QAAQ1E,OAAS,GAAKe,EAAEX,EAAIW,EAAEd,KAAO,KACrDqB,EAAiB,CAAEpD,KAAMZ,IAG3BkH,EAAII,YACJJ,EAAIK,QAAQ9D,EAAEb,EAAGa,EAAEX,EAAIY,EAAUf,EAAMA,EAAMX,KAAKwF,GAAK,EAAG,EAAG,EAAIxF,KAAKwF,IACtEN,EAAIO,8VACGC,CAAA,GAAKjE,EAAZ,CAAeX,EAAGW,EAAEX,EAAIY,MAE1BV,EAAQoE,QAAUD,GAqBdQ,EAAc,SAAA3B,GAGlB,IAFA,IAAMpD,EAAIoD,EAAE4B,OACN9E,EAAIkD,EAAE6B,OACHR,EAAI,EAAGA,EAAIrE,EAAQoE,QAAQ1E,OAAQ2E,IAAK,CAC/C,IAAM5D,EAAIT,EAAQoE,QAAQC,GACtBrF,KAAK8F,IAAIlF,EAAIa,EAAEb,EAAG,GAAKZ,KAAK8F,IAAIhF,EAAIW,EAAEX,EAAG,GAAKd,KAAK8F,IAAIrE,EAAEd,KAAM,IACjEqB,EAAiB,CACfpD,KAAMX,EACNuC,GAAIiB,EAAEjB,GACNc,OAAQtB,KAAKE,MAAM,IAAMuB,EAAEd,UAMnCoF,oBAAU,WACR,IAAMb,EAAMP,EAAUS,QAAQY,WAAW,MACzCnB,EAAOO,QAAUF,EACjBA,EAAIe,UAAY,MAChBf,EAAIgB,SAAS,EAAG,EAAG,IAAK,KACxBvB,EAAUS,QAAQe,iBAAiB,QAASR,GAAa,GA9BtC,SAAfS,IACJC,sBAAsBD,GACtB,IAAMzF,EAAOd,EAAa,EAAG,KAC7BgF,EAAOO,QAAQkB,UAAYzG,EAAa,EAAG,IAC3CgF,EAAOO,QAAQmB,YAAc1G,EAAa,EAAG,IAAM,EAAI,QAAU,QACjEgF,EAAOO,QAAQE,YACfT,EAAOO,QAAQG,QAAQ,IAAK,IAAK5E,EAAMA,EAAMX,KAAKwF,GAAK,EAAG,EAAG,EAAIxF,KAAKwF,IACtEX,EAAOO,QAAQK,SAwBfW,GACAI,SAASL,iBAAiB,mBAAoB,WACxCK,SAASC,QACX/C,GAAQ,MAGX,IAEHqC,oBAAU,WACJpC,GACFoB,EAAQK,SAAU,EAClBpD,EAAiB,CAAEpD,KAAMZ,IAlDb,SAAV0I,IACA3B,EAAQK,UACViB,sBAAsBK,GACtB7B,EAAOO,QAAQuB,UAAU,EAAG,EAAG,IAAK,KACpC1B,EAAYJ,EAAOO,UAgDnBsB,GACA5B,EAAYM,QAAUwB,YACpB,kBAAM5E,EAAiB,CAAEpD,KAAMV,KAC/B,OAGFyG,EAAUS,QAAQyB,MAAMC,cAAgB,OACxC/B,EAAQK,SAAU,EAClB2B,cAAcjC,EAAYM,WAE3B,CAACzB,IAEJoC,oBAAU,WACRf,EAAYI,QAAUrD,EAAaL,UAClC,CAACK,EAAaL,WAEjBqE,oBAAU,WACR,IAAMiB,EAAajF,EAAaf,QAAQiG,OAAO,SAAAxF,GAC7C,OAAQrC,OAAO8H,KAAKlG,EAAQoE,SAAShE,SAASK,EAAEjB,GAAG2G,cAE/CC,EAAgBpG,EAAQoE,QAAQnE,OAAO+F,GAE7ChG,EAAQoE,QAAUgC,GACjB,CAACrF,EAAaf,UAEjB+E,oBAAU,WACR,IAAMiB,EAAahG,EAAQoE,QAAQ5D,IAAI,SAAAC,GACrC,OAAIM,EAAaZ,cAAcC,SAASK,EAAEjB,KACxCiB,EAAEV,QAAS,EACJU,GAEFA,IAETT,EAAQoE,QAAU4B,GACjB,CAACjF,EAAaZ,gBAEjB4E,oBAAU,WACJhE,EAAaH,UACfmF,cAAcjC,EAAYM,UAE3B,CAACrD,EAAaH,WAEjB,IAAMyF,EAAmB,SAAArD,GAAC,OACxBzE,EAAc,CAAEX,KAAMT,EAAaK,KAAMwF,EAAEC,OAAOrE,SAEpD,OACEJ,EAAAC,EAAAC,cAAA,YACIqC,EAAaH,UACbpC,EAAAC,EAAAC,cAAC4H,EAAA,SAAD,MACIvF,EAAaxB,OACbf,EAAAC,EAAAC,cAACuC,EAAD,KACEzC,EAAAC,EAAAC,cAAC2C,EAAD,wCACA7C,EAAAC,EAAAC,cAAC6C,EAAD,CACEwB,SAAUsD,EACVE,YAAY,SAEd/H,EAAAC,EAAAC,cAACyD,EAAD,CACEW,QAAS,kBAAM9B,EAAiB,CAAEpD,KAAMb,MAD1C,aAOHgE,EAAaxB,OACZf,EAAAC,EAAAC,cAAC4H,EAAA,SAAD,KACE9H,EAAAC,EAAAC,cAACgD,EAAD,KAAQX,EAAaJ,OACrBnC,EAAAC,EAAAC,cAAC8H,EAAD,CACE9D,QAASA,EACTC,KAAMA,EACN5B,aAAcA,EACdsF,iBAAkBA,KAIxB7H,EAAAC,EAAAC,cAAA,UAAA4E,EAAA,CACEuC,MAAO,CAAEY,YAAa,QACtBC,IAAK/C,GAFPvF,OAAAuI,EAAA,EAAAvI,CAAAkF,EAAA,QAGS,CAAEwC,cAAenD,EAAO,OAAS,SAH1CvE,OAAAuI,EAAA,EAAAvI,CAAAkF,EAAA,QAIQ,SAJRlF,OAAAuI,EAAA,EAAAvI,CAAAkF,EAAA,SAKS,SALTA,IAOChF,EAAUd,MACTgB,EAAAC,EAAAC,cAAC6D,EAAD,kBAAuBjE,EAAUd,KAAjC,MAILuD,EAAaH,UACZpC,EAAAC,EAAAC,cAACkI,EAAD,CAAUpJ,KAAMc,EAAUd,KAAM6C,MAAOU,EAAaV,UC9L5DwG,IAASC,OACPtI,EAAAC,EAAAC,cAACqI,EAAD,KACEvI,EAAAC,EAAAC,cAACsI,EAAD,KACExI,EAAAC,EAAAC,cAACuI,GAAD,QAGJzB,SAAS0B,eAAe","file":"static/js/main.4726631f.chunk.js","sourcesContent":["export const BEGIN_GAME = \"BEGIN_GAME\";\nexport const ADD_BUBBLE = \"ADD_BUBBLE\";\nexport const POP_BUBBLE = \"POP_BUBBLE\";\nexport const UPDATE_VELOCITY = \"UPDATE_VELOCITY\";\n\nexport const TIMER_TICK = \"TIMER_TICK\";\n\nexport const UPDATE_USER = \"UPDATE_USER\";\n","import React, { useReducer } from \"react\";\nimport { UPDATE_USER } from \"./actions\";\n\nexport const UserContext = React.createContext();\n\nconst initialUserState = { name: \"\" };\n\nconst user_reducer = (state, action) => {\n  const { name } = action;\n  switch (action.type) {\n    case UPDATE_USER:\n      return { ...state, name };\n    default:\n      return state;\n  }\n};\n\nconst UserProvider = ({ children }) => {\n  const [userState, user_dispatch] = useReducer(user_reducer, initialUserState);\n\n  return (\n    <UserContext.Provider value={{ userState, user_dispatch }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport default UserProvider;\n","export function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive\n}\n","import React, { useReducer } from \"react\";\nimport {\n  POP_BUBBLE,\n  ADD_BUBBLE,\n  UPDATE_VELOCITY,\n  TIMER_TICK,\n  BEGIN_GAME\n} from \"./actions\";\nimport { getRandomInt } from \"./utils\";\n\nexport const BubbleContext = React.createContext();\nconst begin = false;\n\nconst bubbles = [];\n\nconst poppedBubbles = [];\n\nconst ids = [];\n\nconst velocity = 50;\n\nconst score = 0;\n\nconst timer = 60;\n\nconst gameOver = false;\n\nconst bubbleReducer = (state, action) => {\n  switch (action.type) {\n    case BEGIN_GAME:\n      return { ...state, begin: true };\n    case ADD_BUBBLE:\n      const id = state.ids.length;\n      let size = getRandomInt(10, 100);\n      let x = getRandomInt(0, 500);\n      if (x + size > 500) {\n        x = 497 - size;\n      } else if (x - size <= 0) {\n        x = 3 + size;\n      }\n      const newBubble = {\n        id,\n        x,\n        y: 0,\n        size,\n        popped: false\n      };\n      const bubbles = [...state.bubbles, newBubble];\n      const ids = [...state.ids, id];\n      return { ...state, bubbles, ids };\n    case POP_BUBBLE:\n      if (state.poppedBubbles.includes(action.id)) return state;\n      const score = state.score + action.points;\n      const poppedBubbles = [...state.poppedBubbles, action.id];\n      const bubblesPopped = state.bubbles.map(b => {\n        if (b.id === action.id) {\n          return { ...b, popped: true };\n        } else {\n          return b;\n        }\n      });\n      return { ...state, bubbles: bubblesPopped, poppedBubbles, score };\n    case UPDATE_VELOCITY:\n      const { velocity } = action;\n      return { ...state, velocity };\n    case TIMER_TICK:\n      const timer = state.timer - 1;\n      const gameOver = timer === 0 ? true : false;\n      return { ...state, timer, gameOver };\n    default:\n      return state;\n  }\n};\n\nconst initialState = {\n  begin,\n  ids,\n  bubbles,\n  poppedBubbles,\n  velocity,\n  score,\n  timer,\n  gameOver\n};\n\nconst BubbleProvider = ({ children }) => {\n  const [bubblesState, bubbles_dispatch] = useReducer(\n    bubbleReducer,\n    initialState\n  );\n\n  return (\n    <BubbleContext.Provider value={{ bubblesState, bubbles_dispatch }}>\n      {children}\n    </BubbleContext.Provider>\n  );\n};\n\nexport default BubbleProvider;\n","import styled from 'styled-components'\n\nexport const Nametainer = styled.div`\n  display: grid;\n  grid-template-columns: 340px;\n  grid-row-gap: 12px;\n  border: 2px black solid;\n  width: 422px;\n  padding: 12px;\n  margin: 22px;\n  box-shadow: 9px 8px black;\n`\nexport const Hey = styled.div`\n  font-family: sans-serif;\n  font-size: 24px;\n`\nexport const UserInput = styled.input`\n  height: 18px;\n  border: 2px solid black;\n  padding: 10px;\n  font-size: 20px;\n  width: 240px;\n`\n\nexport const Timer = styled.div`\n  border: 2px solid black;\n  border-radius: 43rem;\n  padding: 15px;\n  text-align: center;\n  width: 60px;\n  font-size: 46px;\n  font-family: monospace;\n  display: block;\n  margin: 30px 190px;\n  height: 60px;\n`\n\nexport const ControlsContainer = styled.div`\n  display: grid;\n  grid-template-columns: 250px 250px;\n  grid-template-rows: 70px 40px;\n  width: 500px;\n  height: 117px;\n  background: white;\n`\nexport const Score = styled.div`\n  text-align: center;\n  font-size: 44px;\n  font-family: monospace;\n  line-height: 70px;\n`\n\nexport const PlayButton = styled.button`\n  background: white;\n  font-size: 44px;\n  font-weight: solid;\n  font-family: sans-serif;\n  border: 3px solid black;\n  border-radius: 2rem;\n`\n\nexport const BeginButton = styled(PlayButton)`\n  background: white;\n  font-size: 24px;\n  font-weight: solid;\n  font-family: sans-serif;\n  border: 3px solid black;\n  border-radius: 2rem;\n  margin-top: 1px;\n  margin-bottom: 10px;\n  width: 170px;\n  height: 60px;\n`\n\nexport const SliderContainer = styled.div`\n  grid-row: 2;\n  grid-column: 1 / span 2;\n\n  input[type='range'] {\n    -webkit-appearance: none;\n    margin: 18px 0;\n    width: 99%;\n  }\n  input[type='range']:focus {\n    outline: none;\n  }\n  input[type='range']::-webkit-slider-runnable-track {\n    width: 99%;\n    height: 8.4px;\n    cursor: pointer;\n    animate: 0.2s;\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\n    background: white;\n    border-radius: 1.3px;\n    border: 0.2px solid #010101;\n  }\n  input[type='range']::-webkit-slider-thumb {\n    box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;\n    border: 1px solid #000000;\n    height: 30px;\n    width: 20px;\n    border-radius: 3px;\n    background: #ffffff;\n    cursor: pointer;\n    -webkit-appearance: none;\n    margin-top: -11px;\n  }\n  input[type='range']:focus::-webkit-slider-runnable-track {\n    background: red;\n  }\n`\n\nexport const FooterName = styled.div`\n  margin: 20px;\n  font-size: 40px;\n  font-family: sans-serif;\n  border: 2px solid black;\n  padding: 10px;\n  width: 420px;\n  box-shadow: 6px 8px black;\n`\n","import React, { useContext } from \"react\";\nimport { BubbleContext } from \"./BubbleContext\";\nimport { UPDATE_VELOCITY } from \"./actions\";\nimport {\n  ControlsContainer,\n  Score,\n  PlayButton,\n  SliderContainer\n} from \"./styles\";\n\nconst Controls = ({ setPlay, play }) => {\n  const {\n    bubbles_dispatch,\n    bubblesState: { score }\n  } = useContext(BubbleContext);\n  return (\n    <ControlsContainer>\n      <Score>{score}</Score>\n      <PlayButton onClick={() => setPlay(!play)}>\n        {play ? \"PAUSE\" : \"PLAY\"}\n      </PlayButton>\n      <SliderContainer>\n        <input\n          onChange={e =>\n            bubbles_dispatch({\n              type: UPDATE_VELOCITY,\n              velocity: e.target.value\n            })\n          }\n          type=\"range\"\n          name=\"points\"\n          min=\"10\"\n          max=\"100\"\n        ></input>\n      </SliderContainer>\n    </ControlsContainer>\n  );\n};\n\nexport default Controls;\n","import React from 'react'\nimport styled from 'styled-components'\nconst Container = styled.div`\n  text-align: center;\n  font-size: 60px;\n  padding: 80px;\n  font-family: sans-serif;\n  border: 2px black solid;\n  margin: 50px;\n  box-shadow: 10px 9px black;\n`\n\nconst GameOver = ({ name, score }) => {\n  return (\n    <Container>\n      Nice job {name}!<p>You got {score}!</p>\n    </Container>\n  )\n}\n\nexport default GameOver\n","import React, {\n  Fragment,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from \"react\";\nimport { UserContext } from \"./UserContext\";\nimport { BubbleContext } from \"./BubbleContext\";\nimport {\n  POP_BUBBLE,\n  ADD_BUBBLE,\n  UPDATE_USER,\n  TIMER_TICK,\n  BEGIN_GAME\n} from \"./actions\";\nimport Controls from \"./Controls\";\nimport GameOver from \"./GameOver\";\nimport {\n  BeginButton,\n  UserInput,\n  Timer,\n  Nametainer,\n  Hey,\n  FooterName\n} from \"./styles\";\nimport { getRandomInt } from \"./utils\";\n\nfunction App() {\n  const { userState, user_dispatch } = useContext(UserContext);\n  const { bubblesState, bubbles_dispatch } = useContext(BubbleContext);\n  const [play, setPlay] = useState(false);\n  const canvasRef = useRef();\n  const ctxRef = useRef();\n  const intervalRef = useRef();\n  const playRef = useRef();\n  const velocityRef = useRef();\n\n  const bubbles = useRef(bubblesState.bubbles);\n\n  const drawBubbles = ctx => {\n    const movedBubbles = bubbles.current.map((b, i) => {\n      const velocity = b.y > 500 + b.y ? 0 : velocityRef.current / 30;\n      const size = b.popped ? 0 : b.size;\n\n      if (i === bubbles.current.length - 1 && b.y > b.size + 100) {\n        bubbles_dispatch({ type: ADD_BUBBLE });\n      }\n\n      ctx.beginPath();\n      ctx.ellipse(b.x, b.y + velocity, size, size, Math.PI / 4, 0, 2 * Math.PI);\n      ctx.stroke();\n      return { ...b, y: b.y + velocity };\n    });\n    bubbles.current = movedBubbles;\n  };\n\n  const animate = () => {\n    if (playRef.current) {\n      requestAnimationFrame(animate);\n      ctxRef.current.clearRect(0, 0, 500, 500);\n      drawBubbles(ctxRef.current);\n    }\n  };\n\n  const introAnimate = () => {\n    requestAnimationFrame(introAnimate);\n    const size = getRandomInt(0, 500);\n    ctxRef.current.lineWidth = getRandomInt(1, 10);\n    ctxRef.current.strokeStyle = getRandomInt(1, 10) > 5 ? \"black\" : \"white\";\n    ctxRef.current.beginPath();\n    ctxRef.current.ellipse(250, 250, size, size, Math.PI / 4, 0, 2 * Math.PI);\n    ctxRef.current.stroke();\n  };\n\n  const handleClick = e => {\n    const x = e.layerX;\n    const y = e.layerY;\n    for (let i = 0; i < bubbles.current.length; i++) {\n      const b = bubbles.current[i];\n      if (Math.pow(x - b.x, 2) + Math.pow(y - b.y, 2) < Math.pow(b.size, 2)) {\n        bubbles_dispatch({\n          type: POP_BUBBLE,\n          id: b.id,\n          points: Math.floor(100 / b.size)\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    const ctx = canvasRef.current.getContext(\"2d\");\n    ctxRef.current = ctx;\n    ctx.fillStyle = \"red\";\n    ctx.fillRect(0, 0, 500, 500);\n    canvasRef.current.addEventListener(\"click\", handleClick, true);\n    introAnimate();\n    document.addEventListener(\"visibilitychange\", function() {\n      if (document.hidden) {\n        setPlay(false);\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    if (play) {\n      playRef.current = true;\n      bubbles_dispatch({ type: ADD_BUBBLE });\n\n      animate();\n      intervalRef.current = setInterval(\n        () => bubbles_dispatch({ type: TIMER_TICK }),\n        1000\n      );\n    } else {\n      canvasRef.current.style.pointerEvents = \"none\";\n      playRef.current = false;\n      clearInterval(intervalRef.current);\n    }\n  }, [play]);\n\n  useEffect(() => {\n    velocityRef.current = bubblesState.velocity;\n  }, [bubblesState.velocity]);\n\n  useEffect(() => {\n    const newBubbles = bubblesState.bubbles.filter(b => {\n      return !Object.keys(bubbles.current).includes(b.id.toString());\n    });\n    const mergedBubbles = bubbles.current.concat(newBubbles);\n\n    bubbles.current = mergedBubbles;\n  }, [bubblesState.bubbles]);\n\n  useEffect(() => {\n    const newBubbles = bubbles.current.map(b => {\n      if (bubblesState.poppedBubbles.includes(b.id)) {\n        b.popped = true;\n        return b;\n      }\n      return b;\n    });\n    bubbles.current = newBubbles;\n  }, [bubblesState.poppedBubbles]);\n\n  useEffect(() => {\n    if (bubblesState.gameOver) {\n      clearInterval(intervalRef.current);\n    }\n  }, [bubblesState.gameOver]);\n\n  const handleUserChange = e =>\n    user_dispatch({ type: UPDATE_USER, name: e.target.value });\n\n  return (\n    <div>\n      {!bubblesState.gameOver && (\n        <Fragment>\n          {!bubblesState.begin && (\n            <Nametainer>\n              <Hey>Hey there! what may I call you?</Hey>\n              <UserInput\n                onChange={handleUserChange}\n                placeholder=\"name\"\n              ></UserInput>\n              <BeginButton\n                onClick={() => bubbles_dispatch({ type: BEGIN_GAME })}\n              >\n                CONTINUE\n              </BeginButton>\n            </Nametainer>\n          )}\n          {bubblesState.begin && (\n            <Fragment>\n              <Timer>{bubblesState.timer}</Timer>\n              <Controls\n                setPlay={setPlay}\n                play={play}\n                bubblesState={bubblesState}\n                handleUserChange={handleUserChange}\n              />\n            </Fragment>\n          )}\n          <canvas\n            style={{ touchAction: \"none\" }}\n            ref={canvasRef}\n            style={{ pointerEvents: play ? \"auto\" : \"none\" }}\n            width=\"500px\"\n            height=\"500px\"\n          />\n          {userState.name && (\n            <FooterName>Good luck {userState.name}!</FooterName>\n          )}\n        </Fragment>\n      )}\n      {bubblesState.gameOver && (\n        <GameOver name={userState.name} score={bubblesState.score} />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport UserProvider from \"./UserContext\";\nimport BubbleProvider from \"./BubbleContext\";\n\nReactDOM.render(\n  <BubbleProvider>\n    <UserProvider>\n      <App />\n    </UserProvider>\n  </BubbleProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}